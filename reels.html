<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Reels</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <!-- Firebase SDKs (compat) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>
  <script src="/assets/js/firebase-config.js"></script>
</head>
<body onload="loadReels()">
  <header class="header">
    <div class="container row" style="align-items:center;justify-content:space-between">
      <strong>MySocialReels</strong>
      <nav><a href="/">Home</a> Â· <a href="/members/login.html">Members</a></nav>
    </div>
  </header>

  <main class="container">
    <h2>Public Reels</h2>
    <div id="grid" class="grid"></div>
  </main>

  <script>
    async function loadReels(){
      try {
        firebase.initializeApp(firebaseConfig);
        const storage = firebase.storage();
        const listRef = storage.ref('public/reels');
        const res = await listRef.listAll();
        const grid = document.getElementById('grid');
        if(res.items.length === 0) { grid.innerHTML = '<p>No public reels yet.</p>'; return; }
        for(const it of res.items){
          const url = await it.getDownloadURL();
          const card = document.createElement('div'); card.className='card';
          card.innerHTML = `<img class="video-thumb" src="${url}" alt="${it.name}"><h4>${it.name}</h4><small>Public reel</small>`;
          grid.appendChild(card);
        }
      } catch(e){ console.error(e); document.getElementById('grid').innerText = 'Failed to load reels.'; }
    }
  </script>
</body>
</html>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.4.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyDTG6WeUnp4IonF7rq9HPMbGKBkMFt583o",
    authDomain: "my-social-reels.firebaseapp.com",
    projectId: "my-social-reels",
    storageBucket: "my-social-reels.firebasestorage.app",
    messagingSenderId: "147742507021",
    appId: "1:147742507021:web:1b49939c2c975f575d1544"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
</script>